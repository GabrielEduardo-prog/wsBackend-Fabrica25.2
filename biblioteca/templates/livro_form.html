{% extends 'base.html' %}
{% block content %}
<h2>📖 Cadastrar Livro</h2>
<form method="post">
    {% csrf_token %}
    
    <div style="margin-bottom: 15px;">
        <label style="display: block; margin-bottom: 5px; font-weight: bold;">📝 Título:</label>
        <input type="text" name="titulo" value="{{ form.titulo.value|default:'' }}" 
               placeholder="Digite o título do livro"
               style="width: 100%; max-width: 400px; padding: 12px; border: 2px solid #e1e5fe; border-radius: 10px; font-size: 16px; background: white !important; color: black !important;"
               required>
    </div>
    
    <div style="margin-bottom: 15px;">
        <label style="display: block; margin-bottom: 5px; font-weight: bold;">✍️ Escritor:</label>
        <select name="escritor" 
                style="width: 100%; max-width: 400px; padding: 12px; border: 2px solid #e1e5fe; border-radius: 10px; font-size: 16px; background: white !important; color: black !important; cursor: pointer !important;"
                required>
            <option value="">Selecione um escritor</option>
            {% for escritor in form.escritor.field.queryset %}
                <option value="{{ escritor.pk }}" {% if form.escritor.value == escritor.pk %}selected{% endif %}>
                    {{ escritor.nome }}
                </option>
            {% endfor %}
        </select>
        <small style="color: #666;">Se não há escritores, <a href="{% url 'biblioteca:escritor_create' %}">cadastre um primeiro</a></small>
    </div>
    
    <div style="margin-bottom: 15px;">
        <label style="display: block; margin-bottom: 5px; font-weight: bold;">📅 Data de Publicação:</label>
        <input type="date" name="data_publicacao" value="{{ form.data_publicacao.value|default:'' }}"
               style="width: 100%; max-width: 400px; padding: 12px; border: 2px solid #e1e5fe; border-radius: 10px; font-size: 16px; background: white !important; color: black !important;"
               required>
    </div>
    
    <div style="margin-bottom: 15px;">
        <label style="display: block; margin-bottom: 5px; font-weight: bold;">🔢 ISBN:</label>
        <input type="text" name="isbn" value="{{ form.isbn.value|default:'' }}" 
               placeholder="Digite o ISBN (ex: 9788535902778)"
               style="width: 100%; max-width: 400px; padding: 12px; border: 2px solid #e1e5fe; border-radius: 10px; font-size: 16px; background: white !important; color: black !important;"
               required>
    </div>
    
    <div style="margin-top: 20px;">
        <button type="submit">💾 Salvar Livro</button>
        <a href="{% url 'biblioteca:livro_list' %}"><button type="button">↩️ Voltar</button></a>
    </div>
</form>

{% if form.errors %}
<div style="background: #ffebee; border: 1px solid #e57373; border-radius: 8px; padding: 15px; margin-top: 20px; color: #c62828;">
    <h4>⚠️ Erros encontrados:</h4>
    {{ form.errors }}
</div>
{% endif %}
{% endblock %}